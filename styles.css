/* ============================================ */
/* Design System - Spacing Variables */
/* ============================================ */
:root {
	--spacing-xs: 4px;
	--spacing-sm: 8px;
	--spacing-md: 12px;
	--spacing-lg: 16px;
	--spacing-xl: 20px;
	--spacing-xxl: 24px;
}

/* ============================================ */
/* Design System - Button Base Styles */
/* ============================================ */
.btn-base {
	padding: var(--spacing-sm) var(--spacing-md);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 13px;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	outline: none;
	box-shadow: none;
}

.btn-base:hover {
	background: var(--background-modifier-hover);
}

.btn-base:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

/* Button variants */
.btn-primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

.btn-primary:hover:not(:disabled) {
	background: var(--interactive-accent-hover);
}

.btn-primary:focus {
	outline: none;
	box-shadow: none;
}

.btn-primary:active {
	outline: none;
	box-shadow: none;
}

.btn-danger {
	background: var(--interactive-critical);
	color: white;
	border-color: var(--interactive-critical);
}

.btn-danger:hover:not(:disabled) {
	background: var(--interactive-critical-hover);
}

.btn-icon {
	padding: var(--spacing-sm);
	min-width: 32px;
	height: 32px;
}

.btn-small {
	padding: 6px var(--spacing-sm);
	font-size: 12px;
	min-height: 28px;
}

/* ============================================ */
/* Design System - Input Base Styles */
/* ============================================ */
.input-base {
	padding: var(--spacing-sm) var(--spacing-md);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 13px;
	font-family: inherit;
	outline: none;
}

.input-base:focus {
	border-color: var(--interactive-accent);
}

.input-base:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.input-base::placeholder {
	color: var(--text-muted);
}

/* ============================================ */
/* Design System - Transparent Button Styles */
/* ============================================ */
/* High specificity transparent button to override any base styles */
button.btn-transparent,
.btn-transparent {
	background: transparent !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
	color: #9CA3AF !important;
	cursor: pointer;
	transition: color 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	position: relative;
	/* Reset any inherited padding/margins */
	padding: 0 !important;
	margin: 0 !important;
	font-size: inherit;
}

button.btn-transparent:hover,
.btn-transparent:hover {
	background: transparent !important;
	color: #1F2937 !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
}

button.btn-transparent:focus,
.btn-transparent:focus {
	outline: none !important;
	border: none !important;
	box-shadow: none !important;
}

button.btn-transparent:disabled,
.btn-transparent:disabled {
	opacity: 0.4 !important;
	cursor: not-allowed !important;
	pointer-events: auto !important;
}

button.btn-transparent:disabled:hover,
.btn-transparent:disabled:hover {
	background: transparent !important;
	color: #9CA3AF !important;
}

.theme-dark button.btn-transparent,
.theme-dark .btn-transparent {
	color: #6B7280 !important;
}

.theme-dark button.btn-transparent:hover,
.theme-dark .btn-transparent:hover {
	color: #F9FAFB !important;
}

.theme-dark button.btn-transparent:disabled:hover,
.theme-dark .btn-transparent:disabled:hover {
	color: #6B7280 !important;
}

/* 不同尺寸的透明按钮 */
button.btn-transparent-sm,
.btn-transparent-sm {
	width: 24px;
	height: 24px;
	padding: 6px !important;
	border-radius: 4px !important;
}

button.btn-transparent-md,
.btn-transparent-md {
	width: 32px;
	height: 32px;
	padding: var(--spacing-sm) !important;
	border-radius: 0;
}

/* General styles */

/* Selector and dropdown menu */

.dropdown-menu {
	position: absolute;
	bottom: 100%;
	left: 0;
	width: max-content;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15);
	z-index: 1000;
	margin-bottom: 4px;
	max-height: 200px;
	overflow-y: auto;
	transform: translateZ(0); 
    display: none;
}

.dropdown-menu.visible {
    display: block;
}

.dropdown-arrow {
    font-size: 10px;
	margin-left: 4px;
}
	
.dropdown-arrow::before {
    content: '▲';
}

.dropdown-arrow.rotated::before {
    content: '▼';
}

.dropdown-option-content{
	display: flex;
	align-items: center;
	gap: 6px;
	width: 100%;
}
.dropdown-option {
	padding: var(--spacing-sm) var(--spacing-md);
	cursor: pointer;
	font-size: 11px;
	color: var(--text-normal);
	transition: background-color 0.2s ease;
}

.dropdown-option:hover {
	background: var(--background-modifier-hover);
}

.dropdown-option.selected {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}


.dropdown-option-content .model-name {
	font-size: 11px;
	color: inherit;
	flex: 1;
}

.dropdown-selector-button .mode-name .model-name {
	color: inherit;
	font-size: inherit;
}

.dropdown-option:first-child {
	border-radius: 6px 6px 0 0;
}

.dropdown-option:last-child {
	border-radius: 0 0 6px 6px;
}

.dropdown-selector-wrapper {
	position: relative;
	height: 32px; 
	overflow: visible; 
}

.dropdown-selector-button {
	display: flex;
	align-items: center;
	justify-content: flex-start; 
	gap: var(--spacing-xs);
	padding: var(--spacing-xs) var(--spacing-sm);
	background: transparent !important;
	border: none !important;
	border-radius: 4px;
	color: #9CA3AF !important;
	cursor: pointer;
	font-size: 11px;
	line-height: 1.2; 
	transition: color 0.2s ease;
	outline: none !important;
	box-shadow: none !important;
	white-space: nowrap; 
}

.dropdown-selector-button:hover {
	color: #1F2937 !important; 
	background: transparent !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
}



/* Screenshot overlay styles */
.screenshot-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background: rgba(0, 0, 0, 0.3);
	z-index: 1000000;
	cursor: crosshair;
	user-select: none;
}

.screenshot-selection {
	position: absolute;
	border: 2px solid #00ff00;
	background: rgba(0, 255, 0, 0.1);
	pointer-events: none;
	box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.3);
}

/* Image editor modal styles */
.image-editor-modal .modal {
	width: 90vw;
	max-width: 1200px;
	height: 80vh;
	max-height: 800px;
}

.image-editor-container {
	height: 100%;
	display: flex;
	flex-direction: column;
}

.image-editor-toolbar {
	display: flex;
	padding: var(--spacing-sm);
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
	gap: 5px;
	align-items: center;
	flex-wrap: wrap;
}

.image-editor-toolbar button {
	/* 基础样式现在由统一按钮类提供 */
}

.image-editor-canvas-container {
	flex: 1;
	display: flex;
	justify-content: center;
	align-items: center;
	overflow: auto;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	margin: var(--spacing-sm) 0;
	padding: var(--spacing-xl);
}

.image-editor-canvas-container canvas {
	max-width: 100%;
	max-height: 100%;
	box-shadow: 0 0 10px rgba(0,0,0,0.3);
	border-radius: 4px;
}

.image-editor-button-bar {
	display: flex;
	justify-content: space-between;
	padding: var(--spacing-sm);
	background: var(--background-secondary);
	border-top: 1px solid var(--background-modifier-border);
	gap: 10px;
}

.image-editor-button-bar > div {
	display: flex;
	gap: 10px;
}

.image-editor-button-bar button {
	/* Essential button styles */
	padding: 8px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 13px;
	transition: all 0.2s ease;
	outline: none;
	white-space: nowrap;
}

.image-editor-button-bar button:hover {
	background: var(--background-modifier-hover);
}

.image-editor-button-bar button:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.image-editor-button-bar button.btn-primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

.image-editor-button-bar button.btn-primary:hover:not(:disabled) {
	background: var(--interactive-accent-hover);
}

.image-editor-button-bar button.btn-danger {
	background: var(--color-red);
	color: var(--text-on-accent);
	border-color: var(--color-red);
}

.image-editor-button-bar button.btn-danger:hover:not(:disabled) {
	background: var(--color-red);
	opacity: 0.8;
}

/* Color picker styling */
.image-editor-toolbar input[type="color"] {
	width: 40px;
	height: 36px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	background: transparent;
}

.image-editor-toolbar input[type="range"] {
	width: 100px;
	height: 36px;
}

/* Settings page enhancements */
.setting-item-description ul {
	margin: var(--spacing-sm) 0;
	padding-left: 20px;
}

.setting-item-description ol {
	margin: var(--spacing-sm) 0;
	padding-left: 20px;
}

.setting-item-description kbd {
	background: var(--background-modifier-border);
	border: 1px solid var(--background-modifier-border-hover);
	border-radius: 3px;
	box-shadow: 0 1px 0 var(--background-modifier-border-hover);
	display: inline-block;
	font-family: var(--font-monospace);
	font-size: 0.8em;
	line-height: 1;
	padding: 2px 4px;
	white-space: nowrap;
}

/* Responsive design */
@media (max-width: 768px) {
	.image-editor-modal .modal {
		width: 95vw;
		height: 90vh;
	}
	
	.image-editor-toolbar {
		flex-wrap: wrap;
		padding: var(--spacing-sm);
		gap: var(--spacing-xs);
	}
	
	.image-editor-toolbar button {
		padding: 6px 10px;
		font-size: 12px;
		min-width: 28px;
		height: 28px;
	}
	
	.image-editor-button-bar {
		flex-direction: column;
		gap: var(--spacing-sm);
	}
	
	.image-editor-button-bar > div {
		justify-content: center;
	}
}

/* Dark mode adjustments */
.theme-dark .screenshot-overlay {
	background: rgba(0, 0, 0, 0.5);
}

.theme-dark .screenshot-selection {
	box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
}

/* Loading states */
.image-editor-loading {
	display: flex;
	justify-content: center;
	align-items: center;
	height: 200px;
	color: var(--text-muted);
}

.image-editor-loading::after {
	content: "Loading...";
	animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
	0% { opacity: 1; }
	50% { opacity: 0.5; }
	100% { opacity: 1; }
}

/* Tooltip styles */
.image-editor-tooltip {
	position: absolute;
	background: var(--background-secondary);
	color: var(--text-normal);
	padding: var(--spacing-xs) var(--spacing-sm);
	border-radius: 4px;
	font-size: 12px;
	pointer-events: none;
	z-index: 1000001;
	border: 1px solid var(--background-modifier-border);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Settings tab styles */
.settings-guide-text {
	color: var(--text-muted);
	font-style: italic;
	margin-top: 10px;
}

.settings-textarea-large {
	width: 100%;
	min-height: 100px;
	resize: vertical;
	font-family: var(--font-interface);
	font-size: 14px;
	line-height: 1.5;
}

.settings-textarea-small {
	width: 100%;
	min-height: 80px;
	resize: vertical;
	font-family: var(--font-interface);
	font-size: 14px;
	line-height: 1.5;
}

/* AI Chat View Styles */
.ai-chat-container {
					display: flex;
					flex-direction: column;
					height: 100%;
					padding: 0;
				}

.ai-chat-header {
	padding: 2px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
}

.ai-chat-title-container {
    display: flex;
    align-items: center;
    gap: 4px;
}

.ai-chat-title-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ai-chat-title-icon svg {
    width: 100%;
    height: 100%;
}

.ai-chat-title {
	margin: 0 0 8px 0;
	font-size: 24px;
	font-weight: 600;
}

.model-selector {
	display: flex;
	align-items: center;
	gap: var(--spacing-sm);
}

.model-select {
	padding: var(--spacing-xs) var(--spacing-sm);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 12px;
	min-width: 150px;
}

.current-model {
	font-size: 12px;
	color: var(--text-muted);
	padding: var(--spacing-xs) var(--spacing-sm);
	background: var(--background-primary);
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
}

.no-models {
	font-size: 12px;
	color: var(--text-warning);
	cursor: pointer;
	padding: var(--spacing-xs) var(--spacing-sm);
	border-radius: 4px;
	text-decoration: underline;
}

.no-models:hover {
	background: var(--background-modifier-hover);
}

.ai-chat-area {
	flex: 1;
	overflow-y: scroll; /* 强制显示滚动条，预留空间 */
	padding: var(--spacing-lg) 0;
}

/* ai-chat-area 滚动条样式优化 */
.ai-chat-area::-webkit-scrollbar {
	width: 8px;
}

.ai-chat-area::-webkit-scrollbar-track {
	background: transparent; /* 轨道透明，但依然占位 */
	border-radius: 4px;
}

.ai-chat-area::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 4px;
	transition: background-color 0.2s ease;
}

.ai-chat-area::-webkit-scrollbar-thumb:hover {
	background: var(--background-modifier-border-hover);
}

.ai-chat-area:hover::-webkit-scrollbar-track {
	background: var(--background-secondary);
}

.ai-chat-empty {
	text-align: center;
	padding: var(--spacing-lg) var(--spacing-lg);
	color: var(--text-muted);
}

.ai-chat-empty-icon {
	font-size: 48px;
	margin-bottom: 16px;
}

.ai-chat-empty-title {
	font-size: 18px;
	font-weight: 600;
	margin-bottom: 8px;
	color: var(--text-normal);
}

.ai-chat-empty-desc {
	font-size: 14px;
	line-height: 1.4;
	margin-bottom: 16px;
}

.ai-chat-empty-actions {
	margin: var(--spacing-lg) 0;
	text-align: left;
}

.ai-chat-empty-action {
	margin: var(--spacing-sm) 0;
	font-size: 13px;
	line-height: 1.4;
}

.ai-chat-quick-actions {
	display: flex;
	gap: var(--spacing-sm);
	justify-content: center;
	margin-top: 20px;
}

.ai-chat-quick-btn {
	padding: var(--spacing-sm) var(--spacing-md);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
	font-weight: 500;
}

.ai-chat-quick-btn:hover {
	background: var(--interactive-accent-hover);
}

.ai-chat-title-section {
	text-align: center;
	margin-bottom: 24px;
}

.ai-chat-main-title {
	margin: 0;
	font-size: 20px;
	font-weight: 600;
	color: var(--text-normal);
}

.ai-chat-prompts-section {
	margin-bottom: 24px;
}

.ai-chat-section-title {
	padding-top: 20px;  /* 添加上内边距 */
	margin: 0 0 var(--spacing-md) 0;
	font-size: 14px;
	font-weight: 600;
	color: var(--text-normal);
}

.ai-chat-note-indicator {
	font-size: 12px;
	color: var(--text-muted);
	margin-bottom: var(--spacing-sm);
}

.ai-chat-new-chat-btn {
	width: 100%;
	padding: var(--spacing-sm) var(--spacing-md);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
	font-weight: 500;
	margin-bottom: 12px;
}

.ai-chat-new-chat-btn:hover {
	background: var(--interactive-accent-hover);
}

.ai-chat-prompts-list {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.ai-chat-prompt-item {
	padding: var(--spacing-sm) var(--spacing-md);
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
	line-height: 1.3;
	color: var(--text-normal);
	transition: background-color 0.2s;
}

.ai-chat-prompt-item:hover {
	background: var(--background-modifier-hover);
}

.ai-chat-instructions-section {
	margin-bottom: 20px;
}

.ai-chat-instructions-list {
	display: flex;
	flex-direction: column;
	align-items: center;  /* 水平居中 */
	gap: var(--spacing-sm);
}

.ai-chat-instruction-item {
	display: flex;
	align-items: flex-start;
	gap: var(--spacing-sm);
	font-size: 12px;
	line-height: 1.4;
}

.ai-chat-instruction-icon {
	font-size: 14px;
	flex-shrink: 0;
}

.ai-chat-instruction-text {
	color: var(--text-muted);
}

.ai-status {
	margin-top: 12px;
	padding: var(--spacing-sm);
	border-radius: 6px;
	text-align: center;
}

.ai-status-warning {
	color: var(--text-warning);
	font-weight: 600;
	margin-bottom: 4px;
}

.ai-status-ready {
	color: var(--text-success);
	font-weight: 600;
	margin-bottom: 4px;
}

.ai-status-text-only-ready {
	color: var(--text-muted);
	font-weight: 600;
	margin-bottom: 4px;
}

.ai-status-desc {
	font-size: 12px;
	color: var(--text-muted);
}

.ai-status:hover {
	background: var(--background-modifier-hover);
	cursor: pointer;
}

.ai-chat-messages {
	flex: 1;
	display: flex;
	flex-direction: column;
	gap: var(--spacing-sm);
	padding: 0 12px;
	overflow-y: scroll; /* 强制显示滚动条，预留空间 */
	overflow-x: hidden;
	box-sizing: border-box;
	/* Prevent unnecessary scrollbars on single line content */
	scrollbar-width: thin;
}

/* Custom scrollbar styling for better appearance */
.ai-chat-messages::-webkit-scrollbar {
	width: 8px;
}

.ai-chat-messages::-webkit-scrollbar-track {
	background: transparent; /* 轨道透明，但依然占位 */
	border-radius: 4px;
}

.ai-chat-messages::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 4px;
	/* 当没有足够内容滚动时，滑块也变透明 */
	transition: background-color 0.2s ease;
}

.ai-chat-messages::-webkit-scrollbar-thumb:hover {
	background: var(--background-modifier-border-hover);
}

/* 当容器被hover时，显示滚动条轨道 */
.ai-chat-messages:hover::-webkit-scrollbar-track {
	background: var(--background-secondary);
}

/* New message block layout */
.ai-chat-message {
	display: flex;
	flex-direction: column;
	background: var(--background-secondary);
	border: 2px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 6px;
	transition: all 0.2s ease;
	margin-bottom: 4px;
	overflow: visible;
}

.ai-chat-message:hover {
	border-color: var(--background-modifier-hover);
	box-shadow: 0 1px 6px rgba(0, 0, 0, 0.12);
}

.ai-chat-message-row {
	display: flex;
	gap: var(--spacing-sm);
	width: 100%;
	max-width: 100%;
	overflow: visible; /* Allow natural expansion */
	box-sizing: border-box;
}

/* Avatar section */
.ai-chat-message-avatar {
	flex-shrink: 0;
	width: 32px;
	display: flex;
	flex-direction: column;
	align-items: center;
}

.ai-chat-avatar-icon {
	width: 28px;
	height: 28px;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
}

.ai-chat-avatar-icon.user-avatar {
	background: var(--background-secondary);
	color: var(--text-muted);
}

.ai-chat-avatar-icon.ai-avatar {
	background: var(--background-secondary);
	color: var(--text-muted);
}

/* Content section takes remaining width */
.ai-chat-message-content-section {
	flex: 1;
	display: flex;
	flex-direction: column;
	gap: var(--spacing-xs);
	min-width: 0;
}

.ai-chat-message-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	font-size: 12px;
	color: var(--text-muted);
	margin-bottom: 6px;
	padding: 4px 0;
	min-height: 24px;
}

.ai-chat-message-time {
	opacity: 0.8;
	font-size: 11px;
	font-weight: 500;
}

/* Include in context checkbox */
.ai-chat-include-context-checkbox {
	width: 18px;
	height: 18px;
	margin: 3px 6px 3px 0;
	cursor: pointer;
	accent-color: var(--interactive-accent);
	opacity: 0.7;
	transition: opacity 0.2s ease;
	/* Align with button center */
	align-self: center;
	flex-shrink: 0;
}

.ai-chat-include-context-checkbox:hover {
	opacity: 1;
}

.ai-chat-message:hover .ai-chat-include-context-checkbox {
	opacity: 1;
}

.ai-chat-message-content {
	background: transparent;
	border: none;
	padding: 0;
	width: 100%;
	line-height: 1.3;
	font-size: 14px;
	user-select: text;
	-webkit-user-select: text;
	-moz-user-select: text;
	-ms-user-select: text;
	word-wrap: break-word;
	overflow-wrap: break-word;
	white-space: pre-wrap;
	max-width: 100%;
	overflow: visible; /* Allow content to expand naturally */
}

/* Action buttons - now in header on right */
.ai-chat-message-actions {
	display: flex;
	align-items: center;
	gap: 2px;
	opacity: 0.6;
	transition: opacity 0.2s ease;
}

.ai-chat-message:hover .ai-chat-message-actions {
	opacity: 1;
}

/* Enhanced specificity for message action buttons */
button.message-action-btn,
.message-action-btn {
	/* Ensure transparent button properties are applied */
	background: transparent !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
}

button.message-action-btn.delete-btn:hover,
.message-action-btn.delete-btn:hover {
	color: var(--text-error) !important;
}

/* Enhanced tooltip styles for message action buttons */
button.message-action-btn::after,
.message-action-btn::after {
	content: attr(data-tooltip);
	position: absolute;
	left: 50%;
	top: 100%;
	margin-top: 8px;
	transform: translateX(-50%);
	background: #374151;
	color: white;
	padding: 6px var(--spacing-sm);
	border-radius: 4px;
	font-size: 12px;
	white-space: nowrap;
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.2s ease;
	z-index: 1000;
}

button.message-action-btn:hover::after,
.message-action-btn:hover::after {
	opacity: 1;
}

.ai-chat-message-image {
	max-width: 200px;
	max-height: 200px;
	border-radius: 4px;
	cursor: pointer;
	margin-bottom: 8px;
	object-fit: contain;
	transition: all 0.2s ease;
	border: 2px solid transparent;
}

/* Image selection and hover effects */
.ai-chat-message-image::selection {
	background: rgba(0, 123, 255, 0.4);
	outline: 3px solid rgba(0, 123, 255, 0.6);
	border-radius: 6px;
}

.ai-chat-message-image::-moz-selection {
	background: rgba(0, 123, 255, 0.4);
	outline: 3px solid rgba(0, 123, 255, 0.6);
	border-radius: 6px;
}

.ai-chat-message-image:hover {
	border-color: rgba(0, 123, 255, 0.3);
	transform: scale(1.02);
}

/* Enhance selection visibility when part of text selection */
.ai-chat-message-content:has(*::selection) .ai-chat-message-image {
	outline: 2px solid rgba(0, 123, 255, 0.5);
	outline-offset: 2px;
}

.ai-chat-message-images-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
	gap: var(--spacing-md);
	margin-bottom: 8px;
}

.ai-chat-message-image-wrapper {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: var(--spacing-xs);
}

.ai-chat-message-image-wrapper .ai-chat-message-image {
	width: 100%;
	max-width: 180px;
	max-height: 180px;
	margin-bottom: 0;
	transition: all 0.2s ease;
	border: 2px solid transparent;
}

/* Grid image selection and hover effects */
.ai-chat-message-image-wrapper .ai-chat-message-image::selection {
	background: rgba(0, 123, 255, 0.4);
	outline: 3px solid rgba(0, 123, 255, 0.6);
	border-radius: 6px;
}

.ai-chat-message-image-wrapper .ai-chat-message-image::-moz-selection {
	background: rgba(0, 123, 255, 0.4);
	outline: 3px solid rgba(0, 123, 255, 0.6);
	border-radius: 6px;
}

.ai-chat-message-image-wrapper .ai-chat-message-image:hover {
	border-color: rgba(0, 123, 255, 0.3);
	transform: scale(1.02);
}

.ai-chat-message-image-filename {
	font-size: 10px;
	color: var(--text-muted);
	text-align: center;
	word-break: break-all;
	max-width: 180px;
}

.ai-chat-image-count-indicator {
	font-size: 11px;
	color: var(--text-muted);
	background: var(--background-modifier-border);
	padding: 2px 6px;
	border-radius: 10px;
	margin-top: 4px;
	display: inline-block;
	font-weight: 500;
}

.ai-chat-message-text {
	line-height: 1.3;
	font-size: 14px;
	overflow-x: hidden;
	word-wrap: break-word;
	overflow-wrap: break-word;
	max-width: 100%;
	box-sizing: border-box;
	min-height: auto;
	height: auto;
	overflow-y: visible;
}

.ai-chat-message-text p {
	margin: 0 0 4px 0;
	line-height: 1.3;
}

.ai-chat-message-text p:last-child {
	margin-bottom: 0;
}

.ai-chat-message-text h1,
.ai-chat-message-text h2,
.ai-chat-message-text h3 {
	margin: 6px 0 3px 0;
	line-height: 1.2;
}

.ai-chat-message-text ul,
.ai-chat-message-text ol {
	margin: var(--spacing-xs) 0;
	padding-left: 16px;
	line-height: 1.3;
}

.ai-chat-message-text li {
	margin: 2px 0;
}

.ai-chat-message-text code {
	background: var(--code-background);
	padding: 2px 4px;
	border-radius: 4px;
	font-family: var(--font-monospace);
	font-size: 0.9em;
	border: 1px solid var(--background-modifier-border);
}

.ai-chat-typing-indicator {
	display: flex;
	align-items: center;
	gap: var(--spacing-xs);
	padding: var(--spacing-sm) 0;
}

.typing-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: var(--text-muted);
	animation: typingDots 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) {
	animation-delay: 0s;
}

.typing-dot:nth-child(2) {
	animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
	animation-delay: 0.4s;
}

@keyframes typingDots {
	0%, 60%, 100% {
		transform: translateY(0);
		opacity: 0.4;
	}
	30% {
		transform: translateY(-10px);
		opacity: 1;
	}
}

.ai-chat-input-area {
	border-top: 1px solid var(--background-modifier-border);
	padding: 2px var(--spacing-xs) var(--spacing-xs) var(--spacing-xs);
}

/* Top action bar */
.ai-chat-top-action-bar {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 2px;
	padding: 0;
}

.ai-chat-left-actions-top {
	display: flex;
	gap: var(--spacing-xs);
	align-items: center;
}

.ai-chat-right-actions-top {
	display: flex;
	gap: var(--spacing-xs);
}

/* Enhanced specificity for AI chat action buttons */
button.ai-chat-action-btn,
.ai-chat-action-btn {
	/* 现在继承透明按钮基类 */
	font-size: 16px;
	/* Ensure transparent button properties are applied */
	background: transparent !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
}

/* Enhanced tooltip styles for AI chat action buttons */
button.ai-chat-action-btn::after,
.ai-chat-action-btn::after {
	content: attr(data-tooltip);
	position: absolute;
	left: 50%;
	bottom: 100%;
	margin-bottom: 8px;
	transform: translateX(-50%);
	background: #374151;
	color: white;
	padding: 6px var(--spacing-sm);
	border-radius: 4px;
	font-size: 12px;
	white-space: nowrap;
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.2s ease;
	z-index: 1000;
}

button.ai-chat-action-btn:hover::after,
.ai-chat-action-btn:hover::after {
	opacity: 1;
}

/* Drag and drop zone - ultra minimalist */
.ai-chat-drop-zone {
	border: 2px dashed #E5E7EB;
	border-radius: 4px;
	padding: 6px;
	margin-bottom: 2px;
	text-align: center;
	transition: border-color 0.2s ease;
	background: transparent;
}

.ai-chat-drop-zone:hover {
	border-color: #9CA3AF;
}

.ai-chat-drop-zone-active {
	border: 2px dashed var(--interactive-accent) !important;
	background: var(--background-modifier-border) !important;
	transform: scale(1.02);
}

.ai-chat-drop-zone-content {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: var(--spacing-sm);
	color: var(--text-muted);
	font-size: 14px;
}

.ai-chat-drop-zone-icon {
	font-size: 18px;
}

.file-picker-link {
	color: var(--interactive-accent);
	text-decoration: none;
	cursor: pointer;
}

.file-picker-link:hover {
	text-decoration: underline;
}

/* Input container - completely borderless */
.ai-chat-input-container {
	position: relative;
	display: flex;
	align-items: flex-end;
	background: transparent;
	border: none !important;
	outline: none !important;
	border-radius: 0;
	padding: 8px 4px;
	margin-bottom: 2px;
	transition: none;
	box-shadow: none !important;
	min-height: 60px;
}

.ai-chat-input-container:focus-within {
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
}

.ai-chat-input {
	flex: 1;
	border: 2px var(--interactive-accent);
	outline: none;
	background: transparent;
	color: var(--text-normal);
	font-family: inherit;
	font-size: 16px;
	line-height: 1.6;
	resize: none;
	min-height: 80px;
	max-height: 200px;
	overflow-y: auto;
	padding-right: 8px; /* Reduced padding since send button moved */
}

.ai-chat-input::placeholder {
	color: #D1D5DB; /* Lighter gray for placeholder text */
}

.theme-dark .ai-chat-input::placeholder {
	color: #6B7280; /* Appropriate gray for dark theme */
}



/* Bottom row - revised layout */
.ai-chat-bottom-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0 1px;
	margin-top: 1px;
	height: 32px; /* 固定高度防止layout shift */
	position: relative; /* 为dropdown提供定位上下文 */
}

.model-selector-container {
	flex: 1;
	height: 32px; /* 固定高度与wrapper一致 */
	overflow: visible; /* 允许dropdown超出容器 */
}

/* Send button in bottom row */
.ai-chat-send-button-bottom {
	background: transparent !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
	color: #9CA3AF !important; /* Use consistent gray color */
	font-size: 16px;
	padding: 6px;
	border-radius: 4px;
	cursor: pointer;
	transition: color 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	margin-left: 8px;
}

.ai-chat-send-button-bottom:hover:not(:disabled) {
	color: #1F2937 !important; /* Darker black on hover */
	background: transparent !important;
}

.theme-dark .ai-chat-send-button-bottom {
	color: #6B7280 !important; /* Consistent gray for dark theme */
}

.theme-dark .ai-chat-send-button-bottom:hover:not(:disabled) {
	color: #F9FAFB !important; /* Light color on hover in dark theme */
}

.ai-chat-send-button-bottom:disabled {
	opacity: 0.4 !important;
	cursor: not-allowed !important;
	pointer-events: auto !important;
}

.ai-chat-send-button-bottom:disabled:hover {
	background: transparent !important;
	color: #9CA3AF !important;
}

.theme-dark .ai-chat-send-button-bottom:disabled:hover {
	color: #6B7280 !important;
}

.ai-chat-send-button-bottom.no-models-disabled {
	opacity: 0.3;
	cursor: not-allowed;
	background-color: var(--background-modifier-border);
	color: var(--text-muted);
	border-color: var(--background-modifier-border);
}

/* Send-only button styles - now consistent with send button */
.ai-chat-send-only-button {
	background: transparent !important;
	border: none !important;
	outline: none !important;
	box-shadow: none !important;
	color: #9CA3AF !important; /* Same gray as send button */
	font-size: 16px;
	padding: 6px;
	border-radius: 4px;
	cursor: pointer;
	transition: color 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	margin-left: 4px; /* Small gap from send button */
}

.ai-chat-send-only-button.invisible{
	display: none;
}

.ai-chat-send-only-button:hover:not(:disabled) {
	color: #1F2937 !important; /* Same hover color as send button */
}

.theme-dark .ai-chat-send-only-button {
	color: #6B7280 !important; /* Same as send button for consistency */
}

.theme-dark .ai-chat-send-only-button:hover:not(:disabled) {
	color: #F9FAFB !important; /* Same hover color as send button */
}

.ai-chat-right-actions {
	display: flex;
	gap: var(--spacing-sm);
}

.ai-chat-action-secondary {
	padding: 6px var(--spacing-md);
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	color: var(--text-muted);
	cursor: pointer;
	font-size: 13px;
	transition: all 0.2s ease;
}

.ai-chat-action-secondary:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.theme-dark .model-selector-button {
	color: #6B7280 !important; /* Lighter gray for dark theme with !important */
}

.theme-dark .model-selector-button:hover {
	color: #F9FAFB !important; /* Light color on hover in dark theme */
}



.model-dropdown-menu {
	min-width: 160px;
	max-width: 300px;

}

.vision-icon {
	color: #8b5cf6;
	display: inline-flex;
	align-items: center;
	flex-shrink: 0;
}

.vision-icon svg {
	width: 12px;
	height: 12px;
	stroke: #8b5cf6;
}

/* Specific styles for vision icons in dropdown options */
.model-dropdown-option .vision-icon {
	color: #8b5cf6;
	display: inline-flex;
	align-items: center;
	flex-shrink: 0;
}

.model-dropdown-option .vision-icon svg {
	width: 12px;
	height: 12px;
	stroke: #8b5cf6;
}


.theme-dark .mode-selector-button {
	color: #6B7280 !important;
}

.theme-dark .mode-selector-button:hover {
	color: #F9FAFB !important;
}


.mode-dropdown-menu {
	min-width: 120px;
	max-width: 200px;
}

.no-models-indicator {
	font-size: 13px;
	color: var(--text-warning);
	padding: 6px var(--spacing-md);
	background: transparent !important;
	border: none !important;
	border-radius: 4px;
	outline: none !important;
	box-shadow: none !important;
}

.ai-chat-input-drag-active .ai-chat-drop-zone {
	border-color: var(--interactive-accent) !important;
	background: var(--background-modifier-border) !important;
	transform: scale(1.02);
}

.ai-chat-image-preview-area {
	margin-bottom: 8px;
	padding: var(--spacing-sm);
	background: var(--background-secondary);
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
}

.images-preview-container {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-sm);
}

.preview-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding-bottom: 6px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.preview-count {
	font-size: 12px;
	color: var(--text-normal);
	font-weight: 500;
}

.preview-count.non-vision-warning {
	color: var(--text-warning);
	font-weight: 600;
}

.images-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
	gap: var(--spacing-sm);
	max-height: 200px;
	overflow-y: auto;
}

.preview-image-item {
	position: relative;
	border-radius: 4px;
	overflow: hidden;
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
}

.preview-image-thumb {
	width: 100%;
	height: 80px;
	object-fit: cover;
	display: block;
	cursor: pointer;
	transition: opacity 0.2s ease;
}

.preview-image-thumb:hover {
	opacity: 0.8;
}

.image-info-overlay {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	background: linear-gradient(transparent, rgba(0,0,0,0.8));
	color: white;
	padding: var(--spacing-xs) 6px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	opacity: 0;
	transition: opacity 0.2s;
}

.preview-image-item:hover .image-info-overlay {
	opacity: 1;
}

.image-filename-overlay {
	font-size: 10px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	flex: 1;
}

.remove-single-image-btn {
	width: 24px;
	height: 24px;
	border-radius: 50%;
	border: 1px solid #9CA3AF; /* Gray border to match other buttons */
	background: transparent !important;
	color: #9CA3AF !important; /* Gray color to match border */
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	position: absolute;
	top: 4px;
	right: 4px;
	z-index: 10;
	transition: all 0.2s ease;
	outline: none;
	box-shadow: none;
	font-size: 16px; /* Larger size for better visibility */
	font-weight: normal; /* Let the symbol speak for itself */
	line-height: 1;
	font-family: Arial, sans-serif;
	padding: 0;
	margin: 0;
	text-align: center;
	vertical-align: middle;
}

.remove-single-image-btn:hover {
	background: transparent !important;
	color: #1F2937 !important; /* Dark color on hover to match other buttons */
	border-color: #1F2937 !important; /* Dark border on hover to match text */
}

.remove-single-image-btn:focus {
	outline: none !important;
	box-shadow: none !important;
}

.image-preview-container {
	display: flex;
	align-items: center;
	gap: var(--spacing-md);
}

.preview-image {
	width: 80px;
	height: 80px;
	object-fit: cover;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
}

.image-preview-info {
	flex: 1;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.image-filename {
	font-size: 12px;
	color: var(--text-normal);
	font-weight: 500;
}

.remove-image-btn {
	width: 20px;
	height: 20px;
	border-radius: 50%;
	border: none;
	background: var(--interactive-critical);
	color: white;
	cursor: pointer;
	font-size: 14px;
	display: flex;
	align-items: center;
	justify-content: center;
	line-height: 1;
}

.remove-image-btn:hover {
	background: var(--interactive-critical-hover);
}

.ai-chat-image-modal{
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.8);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1000;
	cursor: pointer;
}

.ai-chat-show-image{
	max-width: 90%;
	max-height: 90%;
	object-fit: contain;
}

.ai-chat-input {
	flex: 1;
	resize: none;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	padding: var(--spacing-sm);
	background: var(--background-primary);
	color: var(--text-normal);
	font-family: inherit;
}

.ai-chat-button-disabled{
	opacity: 0.4;
	cursor: not-allowed;
}

.ai-chat-send-button {
	background: #4A9EFF;
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-size: 14px;
	font-weight: 500;
	white-space: nowrap;
	align-self: center;
	transition: background-color 0.2s;
}

.ai-chat-send-button:hover:not(:disabled) {
	background: #3B8BFF;
}

.ai-chat-send-button:disabled {
	background: #A0A0A0;
	color: white;
	cursor: not-allowed;
}

/* Improve text selection visibility */
.ai-chat-message-content ::selection {
	background: rgba(0, 123, 255, 0.3);
	color: var(--text-normal);
}

.ai-chat-message-content ::-moz-selection {
	background: rgba(0, 123, 255, 0.3);
	color: var(--text-normal);
}

/* Special selection for user messages with accent background */
.ai-chat-message-user .ai-chat-message-content ::selection {
	background: rgba(255, 255, 255, 0.4);
	color: var(--text-on-accent);
}

.ai-chat-message-user .ai-chat-message-content ::-moz-selection {
	background: rgba(255, 255, 255, 0.4);
	color: var(--text-on-accent);
}

/* Thinking blocks styling */
.ai-thinking-block {
	margin: var(--spacing-md) 0;
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	background: var(--background-secondary);
	overflow: hidden;
	transition: all 0.2s ease;
}

.ai-thinking-block.collapsed {
	background: var(--background-primary);
}

.ai-thinking-header {
	display: flex;
	align-items: center;
	gap: var(--spacing-sm);
	padding: var(--spacing-sm) var(--spacing-md);
	background: var(--background-modifier-border);
	cursor: pointer;
	user-select: none;
	transition: background-color 0.2s ease;
	border-bottom: 1px solid var(--background-modifier-border);
}

.ai-thinking-header:hover {
	background: var(--background-modifier-hover);
}

.ai-thinking-toggle {
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--text-muted);
	transition: transform 0.2s ease, color 0.2s ease;
	flex-shrink: 0;
	width: 20px;
	height: 20px;
}

.ai-thinking-toggle:hover {
	color: var(--text-normal);
}

.ai-thinking-block.collapsed .ai-thinking-toggle {
	transform: rotate(0deg);
}

.ai-thinking-label {
	font-size: 13px;
	font-weight: 600;
	color: var(--text-normal);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.ai-thinking-content {
	padding: var(--spacing-md);
	border-top: none;
	background: var(--background-secondary);
	font-size: 14px;
	line-height: 1.5;
}

.ai-thinking-text {
	margin: 0 0 8px 0;
	color: var(--text-muted);
	font-style: normal;
}

.ai-thinking-text:last-child {
	margin-bottom: 0;
}

.ai-thinking-text strong {
	color: var(--text-normal);
	font-weight: 600;
}

.ai-thinking-text em {
	color: var(--text-accent);
}

/* Markdown rendering with extremely compact spacing */
.markdown-rendered {
	overflow-x: hidden;
	word-wrap: break-word;
	overflow-wrap: break-word;
	max-width: 100%;
	box-sizing: border-box;
	min-height: auto;
	height: auto;
	overflow-y: visible;
}

.markdown-rendered p {
	margin: 0.1em 0 !important;
	line-height: 1.3 !important;
}

.markdown-rendered h1 { 
	margin: 0.3em 0 0.05em 0 !important;
	line-height: 1.1 !important;
	font-size: 1.4em !important;
}

.markdown-rendered h2 { 
	margin: 0.25em 0 0.05em 0 !important;
	line-height: 1.1 !important;
	font-size: 1.25em !important;
}

.markdown-rendered h3 { 
	margin: 0.2em 0 0.03em 0 !important;
	line-height: 1.1 !important;
	font-size: 1.15em !important;
}

.markdown-rendered h4,
.markdown-rendered h5,
.markdown-rendered h6 {
	margin: 0.15em 0 0.03em 0 !important;
	line-height: 1.1 !important;
	font-size: 1.05em !important;
}

/* Extremely compact lists */
.markdown-rendered ul,
.markdown-rendered ol {
	margin: 0.1em 0 !important;
	padding-left: 1.5em !important; /* Increased to prevent bullet cutoff */
	margin-left: 0 !important;
}

.markdown-rendered li {
	margin: 0 !important;
	padding: 0 !important;
	line-height: 1.3 !important;
	list-style-position: outside !important; /* Ensure bullets are outside */
}

.markdown-rendered li p {
	margin: 0 !important;
	padding: 0 !important;
}

/* Nested lists even more compact */
.markdown-rendered li ul,
.markdown-rendered li ol {
	margin: 0 !important;
	padding-left: 1.2em !important; /* Slightly less for nested */
}

.markdown-rendered blockquote {
	margin: 0.1em 0 !important;
	padding: 0.2em 0.6em !important;
}

/* 删除过度的 pre 样式覆盖，让 Obsidian 默认样式生效 */
.markdown-rendered pre {
	margin: 0.1em 0 !important;
	/* 移除 padding 覆盖，让 Obsidian 的默认代码块样式生效 */
}

/* 确保代码块在AI聊天中显示正确 */
.ai-chat-message-content .markdown-rendered pre {
	background: var(--code-background);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: var(--spacing-md) !important;
	overflow-x: auto;
	font-family: var(--font-monospace);
	/* 删除固定的字体大小，让它继承Obsidian的默认设置 */
	line-height: 1.4;
	max-width: 100%;
	box-sizing: border-box;
	white-space: pre-wrap;
	word-wrap: break-word;
}

.ai-chat-message-content .markdown-rendered pre code {
	background: transparent !important;
	border: none !important;
	padding: 0 !important;
	font-size: inherit;
}

.markdown-rendered hr {
	margin: 0.2em 0 !important;
}

.markdown-rendered table {
	margin: 0.1em 0 !important;
}

/* Compact LaTeX formulas */
.markdown-rendered .math-block,
.markdown-rendered .math {
	margin: 0.1em 0 !important;
	line-height: 1.2 !important;
}

.markdown-rendered mjx-container {
	margin: 0.05em 0 !important;
}

.markdown-rendered mjx-container[display="block"] {
	margin: 0.05em 0 0.25em 0 !important; /* 减少上边距，增加下边距 */
}

/* Remove extra spacing from math elements */
.markdown-rendered .MathJax {
	margin: 0 !important;
}

.markdown-rendered .MathJax_Display {
	margin: 0.05em 0 0.2em 0 !important; /* 同样调整MathJax Display的边距 */
}

.ai-chat-thinking-text code {
	background: var(--background-primary);
	padding: 2px 4px;
	border-radius: 3px;
	font-family: var(--font-monospace);
	font-size: 0.9em;
	color: var(--text-normal);
}

/* Message editing styles */
.message-edit-textarea {
	width: 100%;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	padding: var(--spacing-sm);
	background: var(--background-primary);
	color: var(--text-normal);
	font-family: inherit;
	font-size: 14px;
	line-height: 1.5;
	resize: vertical;
	min-height: 100px;
	outline: none;
}

.message-edit-textarea:focus {
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

.ai-chat-message.editing-mode {
	background: var(--background-primary);
	border-color: var(--interactive-accent);
}

.ai-chat-message.editing-mode .ai-chat-message-content {
	margin: var(--spacing-xs) 0;
}

/* Set Keys Modal Styles */
.set-keys-modal {
					width: 700px;
					max-width: 90vw;
				}

.modal-header {
	margin-bottom: 20px;
	text-align: center;
}

.modal-header h2 {
	margin: 0 0 8px 0;
	font-size: 24px;
}

.modal-description {
	margin: 0;
	color: var(--text-muted);
	font-size: 14px;
}

.providers-container {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-xl);
	max-height: 600px;
	overflow-y: auto;
	padding-right: 8px;
}

.provider-setting {
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: var(--spacing-lg);
	background: var(--background-secondary);
}

.provider-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 16px;
}

.provider-header h3 {
	margin: 0;
	color: var(--text-normal);
}

.provider-link {
	color: var(--interactive-accent);
	text-decoration: none;
	font-size: 12px;
}

.provider-link:hover {
	text-decoration: underline;
}

.api-key-container, .add-model-container {
	margin-bottom: 16px;
}

.setting-item-info {
	margin-bottom: 8px;
}

.setting-item-name {
	font-weight: 500;
	color: var(--text-normal);
	margin-bottom: 2px;
}

.setting-item-description {
	font-size: 12px;
	color: var(--text-muted);
}

.api-key-input-container {
	display: flex;
	gap: var(--spacing-sm);
	align-items: center;
}

.add-model-input-container {
	display: flex;
	gap: var(--spacing-sm);
	align-items: center; /* Center align for proper alignment */
	height: 36px; /* Fixed height for consistent alignment */
	min-height: 36px;
	flex-wrap: wrap; /* Allow wrapping for custom provider layout */
}

.add-model-input-container.custom-provider {
	flex-direction: column;
	height: auto;
	align-items: stretch;
}

.vision-checkbox-container {
	display: flex;
	align-items: center;
	gap: 6px;
	margin-top: 8px;
	padding: var(--spacing-xs) var(--spacing-sm);
	background: var(--background-modifier-form-field);
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
}

.vision-checkbox {
	margin: 0;
}

.vision-checkbox-label {
	font-size: 12px;
	color: var(--text-normal);
	margin: 0;
	cursor: pointer;
}

.api-key-input {
	/* Base styles inherited from .input-base */
	flex: 1;
}

/* Removed - focus handled by .input-base */

.modellist-dropdown, .model-text-input {
	/* Base styles inherited from .input-base */
	flex: 1;
	min-height: 36px;
	height: 36px;
}

/* Removed - disabled state handled by .input-base */

/* Removed - focus handled by .input-base */

.set-keys-modal .verify-button-inline, .set-keys-modal .add-model-button {
	/* Base styles inherited from .btn-base */
	white-space: nowrap;
	min-height: 36px;
}

/* Removed - hover handled by .btn-base */

/* Higher specificity for verified state */
.set-keys-modal .api-key-input-container .verify-button-inline.verified,
.set-keys-modal .verify-button-inline.verified {
	background: #22c55e !important;
	color: white !important;
	border-color: #22c55e !important;
	border: 1px solid #22c55e !important;
}

/* Higher specificity for error state */
.set-keys-modal .api-key-input-container .verify-button-inline.error,
.set-keys-modal .verify-button-inline.error {
	background: #ef4444 !important;
	color: white !important;
	border-color: #ef4444 !important;
	border: 1px solid #ef4444 !important;
}

/* Higher specificity for verifying state */
.set-keys-modal .api-key-input-container .verify-button-inline.verifying,
.set-keys-modal .verify-button-inline.verifying {
	background: #3b82f6 !important;
	color: white !important;
	border-color: #3b82f6 !important;
	border: 1px solid #3b82f6 !important;
	cursor: not-allowed;
}

/* Removed - disabled state handled by .btn-base */

.set-keys-modal .add-model-button.enabled {
	background: var(--interactive-accent) !important;
	color: var(--text-on-accent) !important;
}

/* Settings layout consistency */
.setting-item-info {
	min-width: 200px;
	max-width: 200px;
	flex-shrink: 0;
}

.setting-item-control {
	flex: 1;
}

.setting-item-control input[type="text"],
.setting-item-control textarea,
.setting-item-control select {
	width: 100% !important;
	max-width: 100% !important;
}


/* Modal styles for confirmation dialog */
.ai-chat-modal-content {
	width: 400px;
	max-width: 90vw;
	padding: var(--spacing-xl);
	text-align: center;
	margin: 0 auto;
}

.ai-chat-modal-title {
	margin: 0 0 16px 0;
	color: var(--text-normal);
	font-size: 18px;
	font-weight: 600;
}

.ai-chat-modal-description {
	margin: 0 0 12px 0;
	color: var(--text-normal);
	font-size: 14px;
	line-height: 1.4;
}

.ai-chat-modal-preview {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	padding: var(--spacing-md);
	margin: 0 0 20px 0;
	font-size: 13px;
	color: var(--text-muted);
	font-style: italic;
	max-height: 80px;
	overflow-y: auto;
	text-align: left;
}

.ai-chat-modal-button-container {
	display: flex;
	justify-content: center;
	gap: var(--spacing-md);
	margin-top: 20px;
}

.ai-chat-modal-button-cancel {
	padding: var(--spacing-sm) var(--spacing-lg);
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	border-radius: 4px;
	cursor: pointer;
	font-size: 14px;
	transition: all 0.2s ease;
	min-width: 80px;
}

.ai-chat-modal-button-cancel:hover {
	background: var(--background-modifier-hover);
}

.ai-chat-modal-button-delete {
	padding: var(--spacing-sm) var(--spacing-lg);
	border: 1px solid var(--color-red);
	background: var(--color-red);
	color: white;
	border-radius: 4px;
	cursor: pointer;
	font-size: 14px;
	transition: all 0.2s ease;
	min-width: 80px;
}

.ai-chat-modal-button-delete:hover {
	background: #dc2626;
}

/* Chat history modal styles */
.chat-history-modal .modal {
	width: 80vw;
	max-width: 900px;
	height: 70vh;
}

.chat-history-modal-responsive {
	width: min(90vw, 1000px) !important;
	height: min(80vh, 700px) !important;
	max-width: 1000px !important;
	max-height: 700px !important;
}

.chat-history-title {
	margin-bottom: 20px;
	text-align: center;
}

.chat-history-container {
	display: flex;
	flex-direction: column;
	height: 100%;
	width: 100%;
	gap: var(--spacing-lg);
	box-sizing: border-box;
}

.chat-history-section {
	flex: 1;
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: var(--spacing-md);
	background: var(--background-secondary);
	display: flex;
	flex-direction: column;
	min-height: 0;
}

.chat-history-section-title {
	margin: 0 0 12px 0;
	color: var(--text-normal);
}

.chat-history-list {
	max-height: 300px;
	overflow-y: auto;
	overflow-x: hidden;
	display: flex;
	flex-direction: column;
	gap: var(--spacing-sm);
	padding-right: 8px;
	box-sizing: border-box;
	flex: 1;
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: var(--spacing-sm);
	background: var(--background-primary);
}

.chat-history-empty {
	color: var(--text-muted);
	font-style: italic;
	text-align: center;
	padding: var(--spacing-xl);
}

.chat-history-error {
	color: var(--text-error);
	text-align: center;
	padding: var(--spacing-xl);
}

.chat-history-item {
	padding: var(--spacing-md);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: background-color 0.2s;
	background: var(--background-primary);
	word-wrap: break-word;
	overflow-wrap: break-word;
	max-width: 100%;
	box-sizing: border-box;
	display: flex;
	flex-direction: column;
	margin-bottom: 8px;
}

.chat-history-item-title {
	font-weight: 600;
	margin-bottom: 4px;
	color: var(--text-normal);
	word-wrap: break-word;
	overflow-wrap: break-word;
	white-space: normal;
	line-height: 1.3;
	font-size: 13px;
}

.chat-history-item-meta {
	font-size: 12px;
	color: var(--text-muted);
	display: flex;
	justify-content: space-between;
	flex-wrap: wrap;
	gap: var(--spacing-sm);
	align-items: center;
}

.chat-history-item-type {
	color: var(--text-accent);
}

.chat-history-item-preview {
	font-size: 11px;
	color: var(--text-muted);
	margin-top: 6px;
	line-height: 1.3;
}

.chat-history-item:hover {
	background: var(--background-modifier-hover);
}

/* Image editor modal styles extension */
.image-editor-modal-fullscreen .modal {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	max-width: none;
	max-height: none;
	margin: 0;
	border-radius: 0;
}

.image-editor-modal-sized {
	width: var(--modal-width) !important;
	height: var(--modal-height) !important;
	max-width: var(--modal-width) !important;
	max-height: var(--modal-height) !important;
	min-width: var(--modal-width) !important;
	min-height: var(--modal-height) !important;
	overflow: hidden !important;
	resize: none !important;
}

.image-editor-content-fullsize {
	width: 100%;
	height: 100%;
	overflow: hidden;
	box-sizing: border-box;
}

.image-editor-container-layout {
	display: flex;
	flex-direction: column;
	width: 100%;
	height: 100%;
	overflow: hidden;
	box-sizing: border-box;
}

/* Override for proper canvas sizing */
.image-editor-modal-sized .image-editor-container-layout {
	height: auto; /* Let it size to content instead of 100% */
	min-height: 100%; /* But maintain at least full height */
}

.image-editor-toolbar-fixed {
	flex: 0 0 auto; /* Take up the space defined by height, don't grow or shrink */
	min-height: var(--toolbar-height); /* 改为min-height，允许自动扩展 */
}

.image-editor-main-toolbar {
	display: flex;
	align-items: flex-start; /* 改为flex-start支持多行 */
	align-content: flex-start; /* 确保多行内容从顶部对齐 */
	padding: var(--spacing-md);
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
	gap: var(--spacing-sm);
	flex-wrap: wrap;
	min-height: 56px; /* 恢复最小高度，确保双行显示 */
}

.image-editor-tool-button {
	/* 工具按钮基本样式现在由统一按钮类提供 */
	position: relative;
}

.image-editor-tool-button.active {
	background: var(--interactive-accent) !important;
	color: var(--text-on-accent) !important;
	border-color: var(--interactive-accent) !important;
}

.image-editor-history-button {
	/* 历史按钮基本样式现在由统一按钮类提供 */
	position: relative;
}

.image-editor-separator {
	width: 1px;
	height: 24px;
	background: var(--background-modifier-border);
	margin: 0 4px;
}

.image-editor-color-picker {
	width: 32px;
	height: 32px;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	background: none;
}

.image-editor-stroke-size-container {
	display: flex;
	align-items: center;
	gap: var(--spacing-xs);
	padding: 4px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
}

.image-editor-stroke-size-button {
	padding: 4px;
	border: 2px solid transparent;
	background: var(--background-primary);
	cursor: pointer;
	border-radius: 4px;
	width: 28px;
	height: 28px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.image-editor-stroke-size-button.active {
	border-color: var(--interactive-accent);
}

.image-editor-canvas-container-sized {
	display: flex;
	justify-content: center;
	align-items: center;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	margin: 10px var(--spacing-xl);
	height: var(--canvas-height);
	flex-shrink: 0;
	overflow: hidden;
}

/* New flex-based canvas container that properly takes up space in flex layout */
.image-editor-canvas-container-flex {
	display: flex;
	justify-content: center;
	align-items: center;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	margin: 10px var(--spacing-xl);
	flex: 0 0 auto; /* Take up the space defined by height, don't grow or shrink */
	overflow: visible; /* Allow canvas to be fully visible */
	/* Height is set programmatically based on canvas size */
}

/* Override canvas constraints for flex container - let canvas use its exact size */
.image-editor-canvas-container-flex canvas {
	/* Remove max-width/height constraints to prevent squashing */
	max-width: none !important;
	max-height: none !important;
	box-shadow: 0 0 10px rgba(0,0,0,0.3);
	border-radius: 4px;
	/* Ensure canvas can expand the container */
	flex-shrink: 0;
}

/* File name warning styles */
.image-editor-filename-warning {
	font-size: 12px !important;
	margin-top: 4px !important;
	padding: 4px 8px !important;
	border-radius: 4px !important;
	word-wrap: break-word !important;
	text-align: left !important;
}

.image-editor-filename-warning.warning-invalid {
	color: #dc3545 !important;
	background: rgba(220, 53, 69, 0.1) !important;
	border: 1px solid rgba(220, 53, 69, 0.3) !important;
}

.image-editor-filename-warning.warning-conflict {
	color: #f59e0b !important;
	background: rgba(245, 158, 11, 0.1) !important;
	border: 1px solid rgba(245, 158, 11, 0.3) !important;
}

.image-editor-filename-warning.hidden {
	visibility: hidden !important;
	height: 0 !important;
	margin: 0 !important;
	padding: 0 !important;
	border: none !important;
	overflow: hidden !important;
}

.image-editor-canvas {
	box-shadow: 0 0 10px rgba(0,0,0,0.3);
	cursor: crosshair;
	display: block;
}

.image-editor-button-bar-fixed {
	flex: 0 0 auto; /* Take up the space defined by height, don't grow or shrink */
	height: var(--button-bar-height);
}

.image-editor-action-buttons {
	display: flex;
	flex-direction: column;
	padding: var(--spacing-md);
	background: var(--background-secondary);
	border-top: 1px solid var(--background-modifier-border);
	gap: var(--spacing-md);
}

.image-editor-filename-section {
	display: flex;
	align-items: center;
	gap: 0;
}

.image-editor-filename-label {
	font-weight: 500;
	color: var(--text-normal);
	white-space: nowrap;
}

.image-editor-filename-input {
	flex: 1;
	padding: 6px 10px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 14px;
}

.image-editor-button-row {
	display: flex;
	justify-content: flex-end;
	gap: 10px;
}

.image-editor-action-button {
	/* 操作按钮基本样式现在由统一按钮类提供 */
	padding: 10px var(--spacing-xl);
	font-weight: 500;
	font-size: 14px;
}

.image-editor-primary-button {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.image-editor-ai-button {
	background: var(--color-orange);
	color: white;
}

.image-editor-copy-button {
	background: var(--color-purple);
	color: white;
}

.image-editor-disabled-button {
	background: var(--background-modifier-border);
	color: var(--text-muted);
}

.image-editor-content {
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

/* ManageModelsModal Styles */
.manage-models-modal {
	width: 700px;
	max-width: 90vw;
	min-height: 300px;
	max-height: 80vh;
}

.manage-models-modal .modal-content {
	padding: var(--spacing-xxl);
	position: relative;
}

.modal-header {
	margin-bottom: 20px;
	text-align: center;
}

.modal-header h2 {
	margin: 0 0 8px 0;
	font-size: 24px;
}

.modal-description {
	margin: 0;
	color: var(--text-muted);
	font-size: 14px;
}

.models-container {
	max-height: 600px;
}

.models-container.has-models {
	overflow-y: auto;
	padding-right: 8px;
}

.empty-state {
	text-align: center;
	padding: 60px var(--spacing-xl);
	color: var(--text-muted);
	margin: 40px 0;
}

.empty-icon {
	display: flex;
	justify-content: center;
	align-items: center;
	margin-bottom: 20px;
	color: var(--text-muted);
	opacity: 0.6;
	--icon-size:--icon-xl;
}

.empty-icon svg {
	width: 48px;
	height: 48px;
	stroke: var(--text-muted);
}

.empty-state h3 {
	margin: 0 0 12px 0;
	color: var(--text-normal);
	font-size: 18px;
	font-weight: 600;
}

.empty-state p {
	margin: 0;
	font-size: 14px;
	line-height: 1.4;
	color: var(--text-muted);
}

.model-config-item {
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: var(--spacing-lg);
	margin-bottom: 16px;
	background: var(--background-secondary);
}

.model-header {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	margin-bottom: 12px;
}

.manage-models-modal .model-info {
	flex: 1;
}

.manage-models-modal .model-name {
	margin: 0 0 8px 0;
	font-size: 16px;
	color: var(--text-normal);
}

.manage-models-modal .model-meta {
	display: flex;
	gap: var(--spacing-sm);
	flex-wrap: wrap;
}

.provider-badge, .vision-badge, .default-badge {
	font-size: 11px;
	padding: 2px 6px;
	border-radius: 3px;
	background: var(--background-modifier-border);
	color: var(--text-muted);
}

.vision-badge {
	background: transparent;
	color: #8b5cf6;
	border: none;
	padding: 2px;
	display: inline-flex;
	align-items: center;
}

.vision-badge.vision-icon svg {
	width: 14px;
	height: 14px;
	stroke: #8b5cf6;
}

.default-badge {
	background: var(--interactive-accent);
	color: white;
}

.manage-models-modal .model-actions {
	display: flex;
	gap: var(--spacing-sm);
}

/* Removed - now using unified button system */

.toggle-settings-btn {
	/* 现在使用统一的按钮基类，只需要特定样式 */
	margin-bottom: var(--spacing-md);
}

.toggle-settings-btn:hover {
	/* hover 效果由 .btn-base 提供 */
}

.model-settings {
	border-top: 1px solid var(--background-modifier-border);
	padding-top: 16px;
}

.settings-form {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-sm);
}

/* ConfirmDeleteModal Styles */
.confirm-delete-modal {
	width: 400px;
}

.button-group {
	display: flex;
	gap: var(--spacing-md);
	justify-content: flex-end;
	margin-top: 20px;
}

.confirm-delete-modal .cancel-btn, .confirm-delete-modal .delete-btn {
	padding: var(--spacing-sm) var(--spacing-lg);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	font-size: 13px;
}

.confirm-delete-modal .cancel-btn {
	background: var(--background-primary);
	color: var(--text-normal);
}

.confirm-delete-modal .cancel-btn:hover {
	background: var(--background-modifier-hover);
}

.confirm-delete-modal .delete-btn {
	background: #dc3545;
	color: #ffffff;
	border: 1px solid #dc3545;
}

.confirm-delete-modal .delete-btn:hover {
	background: #c82333;
	border-color: #c82333;
	color: #ffffff;
}

/* ModelSelectionModal Styles */
.model-selection-modal {
	width: 500px;
}

.model-selection-modal .models-list {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-sm);
	margin-top: 16px;
}

.model-selection-modal .model-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: var(--spacing-md);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
}

.model-selection-modal .model-info {
	flex: 1;
}

.model-selection-modal .model-name {
	font-weight: 500;
	margin-bottom: 4px;
}

.model-selection-modal .model-meta {
	display: flex;
	gap: var(--spacing-sm);
}

.model-selection-modal .vision-badge, .model-selection-modal .context-badge {
	font-size: 11px;
	padding: 2px 6px;
	border-radius: 3px;
	background: var(--background-modifier-border);
	color: var(--text-muted);
}

.model-selection-modal .vision-badge {
	background: var(--interactive-success);
	color: white;
}

.model-selection-modal .add-btn {
	padding: 6px var(--spacing-md);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
}

.model-selection-modal .add-btn:hover {
	background: var(--interactive-accent-hover);
}

/* Dark theme specific overrides */
.theme-dark .confirm-delete-modal .delete-btn {
	background: #e74c3c;
	color: #ffffff;
	border-color: #e74c3c;
}

.theme-dark .confirm-delete-modal .delete-btn:hover {
	background: #c0392b;
	border-color: #c0392b;
	color: #ffffff;
}

/* Image Editor Enhanced Styles */

/* Action buttons styling */
.image-editor-action-buttons-container {
	display: flex;
	flex-direction: column;
	padding: var(--spacing-md);
	background: var(--background-secondary);
	border-top: 1px solid var(--background-modifier-border);
}

.image-editor-filename-section {
	display: flex !important;
    flex-direction: column !important;
	width: 100% !important;
	margin-bottom: 8px !important;
}

.image-editor-filename-warnings-container {
	width: 100% !important;
	min-height: 16px !important; /* Reserve space to prevent layout shift */
	transition: none !important; /* Disable transitions to prevent animation effects */
}

.image-editor-filename-section-layout {
	display: flex !important;
	align-items: center !important;
	gap: 12px !important;
	width: 100% !important;
	justify-content: flex-start !important;
}

.image-editor-filename-label-style {
	font-weight: 500;
	color: var(--text-normal);
	white-space: nowrap;
	flex-shrink: 0 !important;
}

.image-editor-filename-input-style {
	flex: 1 !important;
	padding: 8px 12px !important;
	font-size: 14px !important;
	text-align: left !important;
	width: auto !important;
	min-width: 200px !important;
}

.image-editor-button-row-layout {
	display: flex;
	justify-content: flex-end;
	gap: 10px;
}

.image-editor-action-button-base {
	padding: 10px var(--spacing-xl);
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
	border-radius: 4px;
	font-weight: 500;
	font-size: 14px;
	background: var(--btn-bg-color, var(--background-primary));
	color: var(--btn-text-color, var(--text-normal));
}

.image-editor-action-button-base.disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

/* Screenshot Manager Styles */

/* Overlay base styling - 初始全局滤镜 */
.screenshot-overlay-base {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background: rgba(0, 0, 0, 0.3);
	z-index: 2147483647;
	cursor: crosshair;
}

/* 当开始选择时隐藏全局滤镜 */
.screenshot-overlay-base.selecting {
	background: transparent;
}

/* Instruction element styling */
.screenshot-instruction-base {
	position: fixed;
	top: 20px;
	left: 50%;
	transform: translateX(-50%);
	background: rgba(0, 0, 0, 0.8);
	color: white;
	padding: 10px var(--spacing-xl);
	border-radius: 5px;
	font-size: 14px;
	font-family: system-ui, -apple-system, sans-serif;
	z-index: 2147483648;
	pointer-events: none;
	text-align: center;
}

/* Mouse indicator base styling */
.screenshot-mouse-indicator-base {
	position: fixed;
	width: 1px;
	height: 100vh;
	background: rgba(255, 0, 0, 0.8);
	display: none;
	pointer-events: none;
	z-index: 2147483646;
}

/* Selection box base styling */
.screenshot-selection-base {
	position: absolute;
	border: 2px solid #00ff00;
	background: rgba(0, 255, 0, 0.1);
	display: none;
	pointer-events: none;
	box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.3);
}

/* Coordinate display base styling */
.screenshot-coord-display-base {
	position: fixed;
	background: rgba(0, 0, 0, 0.8);
	color: white;
	padding: var(--spacing-xs) var(--spacing-sm);
	border-radius: 3px;
	font-size: 11px;
	font-family: monospace;
	z-index: 2147483649;
	pointer-events: none;
	display: none;
}

/* ============================================ */
/* Fixed Header Modal Structure */
/* ============================================ */

/* Container for modal with fixed header */
.modal-with-fixed-header {
	display: flex;
	flex-direction: column;
	height: 100%;
	overflow: hidden;
}


/* Fixed header area that doesn't scroll */
.modal-fixed-header {
	flex-shrink: 0; /* Don't shrink */
	padding: var(--spacing-xs) var(--spacing-xl) var(--spacing-xs) var(--spacing-xl); /* 减少上下padding */
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	position: relative;
}

/* Scrollable content area */
.modal-scrollable-content {
	flex: 1; /* Take remaining space */
	overflow-y: auto;
	padding: var(--spacing-xl) var(--spacing-xxl);
}

/* Close button positioning for fixed header */
.modal-fixed-header .modal-close-button {
	position: absolute;
	top: 4px; /* 减少top值 */
	right: 16px;
	background: none;
	border: none;
	cursor: pointer;
	color: var(--text-muted);
	font-size: 20px;
	line-height: 1;
	padding: 4px;
	border-radius: 3px;
	transition: color 0.2s ease;
}

.modal-fixed-header .modal-close-button:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

/* Special handling for image editor modal */
.image-editor-header {
	padding: var(--spacing-md) var(--spacing-lg) var(--spacing-sm) var(--spacing-lg);
	border-bottom: 1px solid var(--background-modifier-border);
	min-height: 40px;
}

.image-editor-content {
	padding: 0;
	height: 100%;
	overflow: hidden;
}

/* Adjust image editor layout to work with fixed header */
.modal-with-fixed-header.image-editor-container .image-editor-container-layout {
	height: 100%;
	display: flex;
	flex-direction: column;
}
